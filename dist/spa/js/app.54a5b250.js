(function(e){function t(t){for(var n,o,u=t[0],a=t[1],c=t[2],l=0,d=[];l<u.length;l++)o=u[l],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&d.push(i[o][0]),i[o]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n]);f&&f(t);while(d.length)d.shift()();return s.push.apply(s,c||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],n=!0,o=1;o<r.length;o++){var u=r[o];0!==i[u]&&(n=!1)}n&&(s.splice(t--,1),e=a(a.s=r[0]))}return e}var n={},o={1:0},i={1:0},s=[];function u(e){return a.p+"js/"+({}[e]||e)+"."+{2:"8acbf28b",3:"202f4bfd",4:"18ed3a71",5:"faa0cd90",6:"7fd76017",7:"657ce53f",8:"25e661b3",9:"57b6735e",10:"6b8cce16",11:"31c36f08",12:"30bbeed3",13:"2ae83216"}[e]+".js"}function a(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.e=function(e){var t=[],r={2:1,3:1,4:1,5:1,6:1,7:1,8:1,9:1};o[e]?t.push(o[e]):0!==o[e]&&r[e]&&t.push(o[e]=new Promise((function(t,r){for(var n="css/"+({}[e]||e)+"."+{2:"7e04d4b4",3:"0c08d84b",4:"deca983a",5:"2d1072bd",6:"fc50e2af",7:"40fc1280",8:"27713a54",9:"7de96747",10:"31d6cfe0",11:"31d6cfe0",12:"31d6cfe0",13:"31d6cfe0"}[e]+".css",i=a.p+n,s=document.getElementsByTagName("link"),u=0;u<s.length;u++){var c=s[u],l=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(l===n||l===i))return t()}var d=document.getElementsByTagName("style");for(u=0;u<d.length;u++){c=d[u],l=c.getAttribute("data-href");if(l===n||l===i)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var n=t&&t.target&&t.target.src||i,s=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=n,delete o[e],f.parentNode.removeChild(f),r(s)},f.href=i;var p=document.getElementsByTagName("head")[0];p.appendChild(f)})).then((function(){o[e]=0})));var n=i[e];if(0!==n)if(n)t.push(n[2]);else{var s=new Promise((function(t,r){n=i[e]=[t,r]}));t.push(n[2]=s);var c,l=document.createElement("script");l.charset="utf-8",l.timeout=120,a.nc&&l.setAttribute("nonce",a.nc),l.src=u(e);var d=new Error;c=function(t){l.onerror=l.onload=null,clearTimeout(f);var r=i[e];if(0!==r){if(r){var n=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+n+": "+o+")",d.name="ChunkLoadError",d.type=n,d.request=o,r[1](d)}i[e]=void 0}};var f=setTimeout((function(){c({type:"timeout",target:l})}),12e4);l.onerror=l.onload=c,document.head.appendChild(l)}return Promise.all(t)},a.m=e,a.c=n,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(r,n,function(t){return e[t]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var f=l;s.push([0,0]),r()})({0:function(e,t,r){e.exports=r("2f39")},"0047":function(e,t,r){},"2f39":function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"authUser",(function(){return E})),r.d(n,"isUserAuth",(function(){return C})),r.d(n,"getError",(function(){return U}));var o={};r.r(o),r.d(o,"setUserProfile",(function(){return S})),r.d(o,"setUsers",(function(){return O})),r.d(o,"setError",(function(){return q})),r.d(o,"postAdded",(function(){return x}));var i={};r.r(i),r.d(i,"likePost",(function(){return L})),r.d(i,"unLikePost",(function(){return _})),r.d(i,"likeComment",(function(){return F})),r.d(i,"unLikeComment",(function(){return T})),r.d(i,"addComment",(function(){return N})),r.d(i,"deleteComment",(function(){return D})),r.d(i,"addPost",(function(){return M})),r.d(i,"deletePost",(function(){return B})),r.d(i,"followFriend",(function(){return H})),r.d(i,"unFollowFriend",(function(){return $})),r.d(i,"authAction",(function(){return V})),r.d(i,"authUser",(function(){return z})),r.d(i,"signOutAction",(function(){return R})),r.d(i,"fetchUserProfile",(function(){return K}));r("e6cf"),r("5319"),r("35fc"),r("43b9"),r("81a9"),r("7d6e"),r("e54f"),r("4848"),r("c382"),r("985d"),r("0047");var s=r("2b0e"),u=r("1f91"),a=r("42d2"),c=r("b05d"),l=r("9c64"),d=r("436b"),f=r("2a19");s["a"].use(c["a"],{config:{},lang:u["a"],iconSet:a["a"],plugins:{Meta:l["a"],Dialog:d["a"],Notify:f["a"]}});var p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"q-app"}},[r("router-view")],1)},h=[],m=r("ded3"),b=r.n(m),g=r("2f62"),w={name:"App",beforeMount(){this.authAction},methods:b()({},Object(g["b"])({authAction:"pwrup/authAction"}))},P=w,v=r("2877"),y=Object(v["a"])(P,p,h,!1,null,null,null),k=y.exports,A=r("fc1b"),I=function(){return{userProfile:{},users:null,errors:null}};r("ddb0");function E(e,t,r){const n=e.userProfile;return n?b()(b()({},n),{},{get posts(){return r.posts.filter((e=>e.userId===n.userId))},get postsCount(){return this.posts.length},get likesCount(){let e=0;for(const t of this.posts)e+=t.reactions.likesCount;return e},get followersArr(){let e=[];for(const t in n.followers)e.push(t);return e},get followingArr(){let e=[];for(const t in n.following)e.push(t);return e}}):null}function C(e){return!!e.userProfile}function U(e){return console.log("from getters ",e.errors),e.errors}function S(e,t){e.userProfile=t}function O(e,t){e.users=t}function q(e,t){e.errors=t}function x(e,{docRef:t}){e.userProfile["posts"]=[],e.userProfile.posts.push(t.id)}var j=r("260b");function L({state:e},t){const r=e.userProfile.userId,n=A["e"].doc();n.set({postId:t.id,userId:r});const o=A["f"].doc(t.id);delete t.reactions.likes[r],o.update({reactions:{likes:b()(b()({},t.reactions.likes),{},{[r]:{isLiked:!0,likeDocId:n.id}}),likesCount:t.reactions.likesCount+1}})}function _({state:e},t){const r=e.userProfile.userId;A["e"].doc(t.reactions.likes[r].likeDocId).delete(),delete t.reactions.likes[r];const n=A["f"].doc(t.id);n.update({reactions:{likes:b()({},t.reactions.likes),likesCount:t.reactions.likesCount-1}})}function F({state:e},t){const r=e.userProfile.userId,n=A["b"].doc(t.id);delete t.reactions.likes[r],n.update({reactions:{likes:b()(b()({},t.reactions.likes),{},{[r]:{isLiked:!0}}),likesCount:t.reactions.likesCount+1}})}function T({state:e},t){const r=e.userProfile.userId;delete t.reactions.likes[r];const n=A["b"].doc(t.id);n.update({reactions:{likes:b()({},t.reactions.likes),likesCount:t.reactions.likesCount-1}})}function N({commit:e},{comment:t}){const r=A["b"].doc();r.set(t);const n=A["f"].doc(t.postId);n.update({comments:j["a"].firestore.FieldValue.arrayUnion(r.id)}).catch((t=>{e("setError",t)}))}function D({commit:e},{comment:t}){A["b"].doc(t.id).delete(),A["f"].doc(t.postId).update({comments:j["a"].firestore.FieldValue.arrayRemove(t.id)}).catch((t=>{e("setError",t)}))}function M({commit:e},{post:t}){A["f"].add(t).then((t=>{e("postAdded",{docRef:t})})).catch((t=>{e("setError",t)}))}function B({commit:e},{post:t}){A["e"].where("postId","==",t.id).get().then((e=>{let t=A["c"].batch();return e.forEach((e=>{t.delete(e.ref)})),t.commit()})).catch((t=>e("setError",t))),A["b"].where("postId","==",t.id).get().then((e=>{let t=A["c"].batch();return e.forEach((e=>{t.delete(e.ref)})),t.commit()})).catch((t=>e("setError",t))),A["g"].ref().child(t.imgName).delete().catch((t=>e("setError",t))),A["f"].doc(t.id).delete()}function H({state:e,dispatch:t},r){const n=e.userProfile;A["h"].doc(n.userId).update({following:b()(b()({},n.following),{},{[r.userId]:!0})}),A["h"].doc(r.userId).update({followers:b()(b()({},r.followers),{},{[n.userId]:!0})}),t("fetchUserProfile",A["a"].currentUser)}function $({state:e,dispatch:t},r){const n=e.userProfile;delete n.following[r.userId],A["h"].doc(n.userId).update({following:b()({},n.following)}),delete r.followers[n.userId],A["h"].doc(r.userId).update({followers:b()({},r.followers)}),t("fetchUserProfile",A["a"].currentUser)}function V({dispatch:e}){A["a"].onAuthStateChanged((t=>{e("fetchUserProfile",t||null)}))}function z({dispatch:e}){const t=A["a"].currentUser.uid;A["h"].doc(t).onSnapshot((t=>{e("fetchUserProfile",t.data())}))}function R({commit:e}){A["a"].signOut().then((()=>{e("setUserProfile",{}),this.$router.push("/login")})).catch((t=>{e("setError",t)}))}function K({commit:e},t){A["h"].doc(t.uid).get().then((t=>{e("setUserProfile",t.data())})),"/login"===this.$router.currentRoute.path&&this.$router.push("/")}var J={namespaced:!0,state:I,getters:n,mutations:o,actions:i};s["a"].use(g["a"]);var Q=function(){A["h"].onSnapshot((t=>{const r=[];t.forEach((e=>{const t=e.data();t.id=e.id,r.push(t)})),e.commit("pwrup/setUsers",r)}),(t=>{e.commit("pwrup/setError",t)})),A["f"].orderBy("publishedAt","desc").onSnapshot((t=>{const r=[];t.forEach((e=>{const t=e.data();t.id=e.id,r.push(t)})),e.commit("setPosts",r)}),(t=>{e.commit("pwrup/setError",t)})),A["b"].onSnapshot((t=>{const r=[];t.forEach((e=>{const t=e.data();t.id=e.id,r.push(t)})),e.commit("setComments",r)}),(t=>{e.commit("pwrup/setError",t)}));const e=new g["a"].Store({state:{posts:[],comments:[]},modules:{pwrup:J},mutations:{setPosts(e,t){e.posts=t},setComments(e,t){e.comments=t}},getters:{},actions:{},strict:!1});return e},W=r("8c4f");const X=[{path:"/",component:()=>Promise.all([r.e(0),r.e(5)]).then(r.bind(null,"713b")),children:[{path:"",component:()=>Promise.all([r.e(0),r.e(3)]).then(r.bind(null,"bc13")),meta:{showDrawer:!0,requireAuth:!0},name:"Home"},{path:"/login",component:()=>Promise.all([r.e(0),r.e(7)]).then(r.bind(null,"013f")),meta:{hideHeader:!0,hideFooter:!0},name:"Login"},{path:"/signup",component:()=>Promise.all([r.e(0),r.e(9)]).then(r.bind(null,"e422")),meta:{hideHeader:!0,hideFooter:!0},name:"SignUp"},{path:"/inbox",component:()=>Promise.all([r.e(0),r.e(6)]).then(r.bind(null,"6a6f")),meta:{requireAuth:!0},name:"Inbox"},{path:"/explore",component:()=>Promise.all([r.e(0),r.e(12)]).then(r.bind(null,"c07a")),meta:{requireAuth:!0},name:"Explore"},{path:"/activity",component:()=>Promise.all([r.e(0),r.e(10)]).then(r.bind(null,"d53e")),meta:{requireAuth:!0},name:"Activity"},{path:"/me/",component:()=>Promise.all([r.e(0),r.e(4)]).then(r.bind(null,"2ff9")),meta:{requireAuth:!0},name:"Profile"},{path:"/about",component:()=>Promise.all([r.e(0),r.e(2)]).then(r.bind(null,"a1d1")),meta:{hideHeader:!0,hideFooter:!0},name:"About"},{path:"/test",component:()=>Promise.all([r.e(0),r.e(13)]).then(r.bind(null,"c961")),name:"Test"},{path:"/post-image",component:()=>Promise.all([r.e(0),r.e(8)]).then(r.bind(null,"0460")),meta:{requireAuth:!0},name:"PostImage"}]},{path:"/:pathMatch(.*)*",name:"NotFound",component:()=>Promise.all([r.e(0),r.e(11)]).then(r.bind(null,"e51e")),props:!0}];var Z=X;s["a"].use(W["a"]);var G=function({}){const e=new W["a"]({scrollBehavior:()=>({x:0,y:0}),routes:Z,mode:"hash",base:""});return e.beforeEach(((e,t,r)=>{e.matched.some((e=>e.meta.requireAuth))&&!A["a"].currentUser?r({name:"Login",query:{next:e.fullPath}}):r()})),e},Y=async function(){const e="function"===typeof Q?await Q({Vue:s["a"]}):Q,t="function"===typeof G?await G({Vue:s["a"],store:e}):G;e.$router=t;const r={router:t,store:e,render:e=>e(k),el:"#q-app"};return{app:r,store:e,router:t}},ee=r("bc3a"),te=r.n(ee);s["a"].prototype.$axios=te.a;const re="";async function ne(){const{app:e,store:t,router:r}=await Y();let n=!1;const o=e=>{n=!0;const t=Object(e)===e?r.resolve(e).route.fullPath:e;window.location.href=t},i=window.location.href.replace(window.location.origin,""),u=[A["default"],void 0];for(let c=0;!1===n&&c<u.length;c++)if("function"===typeof u[c])try{await u[c]({app:e,router:r,store:t,Vue:s["a"],ssrContext:null,redirect:o,urlPath:i,publicPath:re})}catch(a){return a&&a.url?void(window.location.href=a.url):void console.error("[Quasar] boot error:",a)}!0!==n&&new s["a"](e)}ne()},fc1b:function(e,t,r){"use strict";r.d(t,"c",(function(){return i})),r.d(t,"a",(function(){return s})),r.d(t,"g",(function(){return u})),r.d(t,"h",(function(){return a})),r.d(t,"f",(function(){return c})),r.d(t,"b",(function(){return l})),r.d(t,"e",(function(){return d}));var n=r("260b");r("e71f"),r("588e"),r("ea7b");const o={apiKey:"AIzaSyAASoqhIbKuWo_tZzHXtT3ILuzA9UdlAfg",authDomain:"quisagram.firebaseapp.com",projectId:"quisagram",storageBucket:"quisagram.appspot.com",messagingSenderId:"388990958756",appId:"1:388990958756:web:f53ecd4690ce9bd1eafa31"};n["a"].initializeApp(o);const i=n["a"].firestore(),s=n["a"].auth(),u=n["a"].storage(),a=i.collection("users"),c=i.collection("posts"),l=i.collection("comments"),d=i.collection("likes")}});