(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"4e80":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-item",[s("q-btn",{attrs:{round:"",size:"xs"}},[s("q-avatar",{staticClass:"shadow-3",attrs:{size:"40px"}},[s("img",{attrs:{src:t.friend.avatar}})])],1),s("q-item-section",{staticClass:"q-pl-md",attrs:{clickable:""}},[s("div",{staticClass:"row",staticStyle:{width:"8rem"}},[s("q-item-label",{staticClass:"col-8 text-weight-bold btn-username"},[t._v("\n        "+t._s(t.friend.username)+"\n      ")]),s("q-item-label",{staticClass:"col-12",attrs:{caption:""}},[t._v("\n        "+t._s(t.friend.following.hasOwnProperty(t.user.userId)?t.friend.firstName+" "+t.friend.lastName:"Suggested for you")+"\n      ")])],1)]),s("q-btn",{attrs:{flat:"","no-caps":"",color:"primary",label:t.user.following.hasOwnProperty(t.friend.userId)?"Unfollow":"Follow"},on:{click:function(e){return t.toggleFollow(t.friend)}}})],1)},n=[],r=s("ded3"),o=s.n(r),i=s("2f62"),l={props:{friend:{type:Object,required:!0}},computed:o()({},Object(i["c"])({user:"pwrup/authUser"})),methods:{toggleFollow(t){this.user.following.hasOwnProperty(t.userId)?this.$store.dispatch("pwrup/unFollowFriend",t):this.$store.dispatch("pwrup/followFriend",t)}}},c=l,p=s("2877"),d=s("66e5"),m=s("9c40"),u=s("cb32"),h=s("4074"),f=s("0170"),g=s("eebe"),b=s.n(g),w=Object(p["a"])(c,a,n,!1,null,null,null);e["a"]=w.exports;b()(w,"components",{QItem:d["a"],QBtn:m["a"],QAvatar:u["a"],QItemSection:h["a"],QItemLabel:f["a"]})},5268:function(t,e,s){},bc13:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",{staticClass:"row items-start content-start constrain no-wrap"},[s("div",{staticClass:"col-12 col-xs-12 col-md-8"},[s("post-list")],1),s("the-right-panel")],1)},n=[],r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-4 gt-sm desktop-only q-ml-md"},[s("div",{staticClass:"fixed",staticStyle:{"min-width":"310px"}},[s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"q-mt-xl"},[s("q-btn",{attrs:{round:""}},[s("q-item-section",[s("q-avatar",{attrs:{size:"56px"}},[s("img",{attrs:{src:t.user.avatar}})])],1)],1),s("q-item-section",{staticClass:"q-pl-md"},[s("q-item-label",{staticClass:"text-weight-bold btn-username"},[t._v(t._s(t.user.username))]),s("q-item-label",{staticClass:"text-body2 text-grey-7"},[t._v(t._s(t.user.firstName+" "+t.user.lastName))])],1)],1),s("q-space"),s("q-item",[s("q-item-section",[s("q-item-label",{staticClass:"text-weight-bold text-grey-7"},[t._v("Suggestions For You")])],1),s("q-btn",{attrs:{flat:"","no-caps":"",color:"accent",label:"See All"},on:{click:t.fetchFriendsToFollow}})],1),s("q-dialog",{attrs:{"transition-show":"rotate","transition-hide":"rotate"},model:{value:t.followModal,callback:function(e){t.followModal=e},expression:"followModal"}},[s("q-card",[t.friends.length?s("q-card-section",{staticClass:"scroll",staticStyle:{"max-height":"50vh"}},t._l(t.friends,(function(e){return s("q-item",{directives:[{name:"show",rawName:"v-show",value:t.friends,expression:"friends"}],key:e.id},[s("friends-suggestion",{attrs:{friend:e}})],1)})),1):s("q-card-section",[s("q-item-label",[t._v("\n            No friends to follow!\n          ")])],1)],1)],1),t._l(t.friends,(function(e){return s("q-item",{directives:[{name:"show",rawName:"v-show",value:t.friends,expression:"friends"}],key:e.id},[s("friends-suggestion",{attrs:{friend:e}})],1)})),s("q-separator",{staticClass:"q-mt-md",attrs:{inset:"",color:"$grey-1"}}),s("q-item",[s("q-btn",{attrs:{dense:"","no-caps":"",flat:"",size:"xs",to:"/about",exact:""}},[s("q-item-label",{staticClass:"text-grey-8 text-weight-light text-overline"},[t._v("About")])],1),s("q-btn",{attrs:{dense:"","no-caps":"",flat:"",size:"xs",to:"/test",exact:""}},[s("q-item-label",{staticClass:"text-grey-8 text-weight-light text-overline"},[t._v("Test")])],1)],1)],2)])},o=[],i=s("ded3"),l=s.n(i),c=s("4e80"),p=s("2f62"),d={components:{FriendsSuggestion:c["a"]},data(){return{followModal:!1,friendsToFollow:[],friends:[]}},computed:l()({},Object(p["c"])({user:"pwrup/authUser"})),watch:{user(){this.user&&this.fetchFriends()}},methods:{fetchFriendsToFollow(){this.friendsToFollow=this.friends,this.followModal=!0},fetchFriends(){this.friends=this.$store.state.pwrup.users.filter((t=>t.userId!==this.user.userId&&!this.user.following.hasOwnProperty(t.userId)))}}},m=d,u=s("2877"),h=s("66e5"),f=s("9c40"),g=s("4074"),b=s("cb32"),w=s("0170"),q=s("2c91"),x=s("24e8"),v=s("f09f"),y=s("a370"),C=s("eb85"),_=s("714f"),I=s("eebe"),k=s.n(I),Q=Object(u["a"])(m,r,o,!1,null,null,null),O=Q.exports;k()(Q,"components",{QItem:h["a"],QBtn:f["a"],QItemSection:g["a"],QAvatar:b["a"],QItemLabel:w["a"],QSpace:q["a"],QDialog:x["a"],QCard:v["a"],QCardSection:y["a"],QSeparator:C["a"]}),k()(Q,"directives",{Ripple:_["a"]});var S=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-list",{staticClass:"q-pt-xl",attrs:{padding:""}},t._l(t.posts,(function(t){return s("q-item",{key:t.id,staticClass:"q-px-none"},[s("image-card",{attrs:{post:t}})],1)})),1)},$=[],j=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-card",{staticClass:"my-card"},[s("q-item",[s("q-item-section",{attrs:{avatar:""}},[s("q-avatar",[s("img",{attrs:{src:t.userById(t.post).avatar,alt:t.userById(t.post).lastName+" profile picture"}})])],1),s("q-item-section",[s("q-item-label",{staticClass:"text-subtitle2"},[t._v(t._s(t.userById(t.post).username))]),t.post.location?s("span",{staticClass:"text-grey-8 text-caption"},[t._v("\n        "+t._s(t._f("capitalize")(t.post.location))+"\n      ")]):t._e()],1)],1),s("img",{staticStyle:{width:"614px",height:"auto"},attrs:{src:""+t.post.imgUrl,alt:""+t.post.caption,loading:"lazy"}}),s("div",{staticClass:"row items-center"},[s("q-card-actions",{staticClass:"col-auto q-py-xs"},[s("q-btn",{class:[t.isPostLikedByUser(t.post)?"text-pink-6":"text-grey-10"],attrs:{flat:"",round:"",dense:"",size:"md",icon:t.isPostLikedByUser(t.post)?"eva-heart":"eva-heart-outline"},on:{click:function(e){return t.toggleLikeImage(t.post)}}})],1),s("q-card-section",{staticClass:"col q-pa-none"},[s("div",{staticClass:"text-subtitle2"},[t._v(t._s(t.post.reactions.likesCount)+" likes")])]),s("q-card-section",{staticClass:"col row justify-end q-py-xs"},[t.post.userId===this.$store.getters["pwrup/authUser"].userId?s("q-btn",{attrs:{color:"grey-10",flat:"",round:"",dense:"",size:"md",icon:"eva-trash-outline"},on:{click:function(e){return t.deletePost(t.post)}}}):t._e()],1)],1),s("q-expansion-item",{staticClass:"q-py-none",attrs:{dense:"","dense-toggle":"","expand-separator":""},scopedSlots:t._u([{key:"header",fn:function(){return[s("q-item-section",[s("div",[s("span",{staticClass:"text-subtitle2 q-mr-sm",staticStyle:{height:"20px"}},[t._v(t._s(t.userById(t.post).username))]),s("span",{staticClass:"text-body2 text-weight-light q-pr-md"},[t._v(t._s(t.post.caption)+"\n            ")])])])]},proxy:!0}])},[s("q-card",[s("q-card-section",{staticClass:"more-info"},[t._v("\n        "+t._s(t.post.description||"")+"\n        "),t.post.tags?s("image-tag",{attrs:{tags:t.post.tags}}):t._e()],1)],1)],1),s("comment-list",{attrs:{post:t.post}}),s("q-card-section",{staticClass:"q-py-none"},[s("app-date",{attrs:{timestamp:t.post.publishedAt,"date-class":"q-ma-none q-pa-none text-grey-7 text-uppercase"}})],1),s("comment-save",{on:{"save-comment":t.addComment}})],1)},P=[],L=(s("5319"),s("498a"),s("fc1b")),F=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{attrs:{title:t.humanFriendlyDate()}},[s("q-chip",{class:t.dateClass,attrs:{size:t.dateSize,color:t.bgColor}},[t._v("\n  "+t._s(t.relativeDate(t.timestamp))+"\n")])],1)},T=[],E=s("d146"),z=s("4602"),B=s("b166"),A={name:"AppDate",props:{timestamp:{required:!0,type:Number},dateClass:{type:String,default:"q-pa-none q-ma-none text-grey-5"},dateSize:{type:String,default:"sm"},bgColor:{type:String,default:"transparent"}},methods:{relativeDate(t){return this.timestamp>0?Object(E["a"])(Object(z["a"])(t),new Date,{addSuffix:!0}):"date not found"},humanFriendlyDate(){return this.timestamp>0?Object(B["a"])(Object(z["a"])(this.timestamp),"eee, LLL d, y h:mm a"):"no date"}}},U=A,D=s("b047"),N=Object(u["a"])(U,F,T,!1,null,null,null),M=N.exports;k()(N,"components",{QChip:D["a"]});var R=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.post.comments.length?s("q-card-section",{staticClass:"q-py-none"},[s("div",[s("div",{staticClass:"text-grey-8 q-pl-none q-py-none"},[s("span",{staticClass:"q-pr-xs"},[t._v(t._s(t.post.comments.length))]),t.post.comments.length<=1?s("span",[t._v("comment")]):s("span",[t._v("comments")])]),s("q-scroll-area",{staticStyle:{height:"80px","max-width":"100%"},attrs:{"thumb-style":{right:"0",borderRadius:"5px",background:"rgb(2, 123, 127)",width:"3px",opacity:.175},"bar-style":{right:"0",borderRadius:"9px",background:"rgb(2, 123, 127)",width:"3px",opacity:.1}}},[s("transition-group",{attrs:{appear:"","enter-active-class":"animated fadeIn slow","leave-active-class":"animated fadeOut slow"}},t._l(t.comments,(function(e){return s("div",{key:e.id},[s("div",{staticClass:"row items-center"},[s("q-card-section",{staticClass:"col-8 col-xs-9 q-pa-none",staticStyle:{"line-height":"0.1"}},[s("span",{staticClass:"text-subtitle2 q-mr-sm"},[t._v(t._s(t.userById(e).username))]),s("span",{staticClass:"text-body2 text-weight-light"},[t._v(t._s(e.text))])]),s("q-card-actions",{staticClass:"col no-wrap row justify-end items-center content-start q-mr-xs q-py-none"},[s("app-date",{attrs:{timestamp:e.publishedAt}}),s("span",{staticClass:"q-pl-xs"},[s("q-chip",{staticClass:"q-pa-none q-ma-none text-grey-5",attrs:{size:"sm",color:"white"}},[t._v("\n                  "+t._s(e.reactions.likesCount)+" likes\n                ")])],1),e.userId===t.user.userId?s("q-btn",{staticClass:"q-ml-xs",attrs:{icon:"eva-trash-outline",size:"xs",color:"grey-5",dense:"",flat:"",round:""},on:{click:function(s){return t.deleteComment(e)}}}):t._e(),s("q-btn",{attrs:{color:e.reactions.likes.hasOwnProperty(t.user.userId)?"pink-6":"grey-5",flat:"",round:"",dense:"",size:"xs",icon:e.reactions.likes.hasOwnProperty(t.user.userId)?"eva-heart":"eva-heart-outline"},on:{click:function(s){return t.toggleCommentLike(e)}}})],1)],1)])})),0)],1)],1)]):t._e()},J=[],H={components:{AppDate:M},props:{post:{type:Object,required:!0}},data(){return{}},computed:l()({comments(){return this.$store.state.comments.filter((t=>t.postId===this.post.id))}},Object(p["c"])({user:"pwrup/authUser"})),methods:{userById(t){return this.$store.state.pwrup.users.find((e=>e.id===t.userId))},toggleCommentLike(t){const e=this.$store.getters["pwrup/authUser"].userId;t.reactions.likes.hasOwnProperty(e)?this.$store.dispatch("pwrup/unLikeComment",t):this.$store.dispatch("pwrup/likeComment",t)},deleteComment(t){this.$store.dispatch("pwrup/deleteComment",{comment:t})}}},Y=H,G=s("4983"),K=s("4b7e"),V=Object(u["a"])(Y,R,J,!1,null,null,null),W=V.exports;k()(V,"components",{QCardSection:y["a"],QScrollArea:G["a"],QCardActions:K["a"],QChip:D["a"],QBtn:f["a"]});var X=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",t._l(Object.keys(t.tags),(function(e,a){return s("span",{key:a},[s("q-btn",{staticClass:"q-mr-xs",attrs:{flat:"",dense:"","no-caps":"",color:"primary",padding:"none",label:t.postTags(e)}})],1)})),0)},Z=[],tt={props:{tags:{type:Object,required:!0}},methods:{postTags(t){return"#"+t}}},et=tt,st=Object(u["a"])(et,X,Z,!1,null,null,null),at=st.exports;k()(st,"components",{QBtn:f["a"]});var nt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-card-section",{staticClass:"q-py-none",staticStyle:{"border-top":"1px #eee solid"}},[s("q-input",{attrs:{clearable:"",autogrow:"",borderless:"",placeholder:"Add a comment",color:"grey-8"},on:{input:function(e){return t.isInputEmpty()}},scopedSlots:t._u([{key:"before",fn:function(){return[s("q-icon",{attrs:{name:"sentiment_satisfied_alt"}})]},proxy:!0},{key:"after",fn:function(){return[s("q-btn",{attrs:{round:"",dense:"",flat:"",unelevated:"",disable:!t.newCommentText,"text-color":"primary",label:"Post",type:"submit"},on:{click:function(e){return t.saveCommentData()}}})]},proxy:!0}]),model:{value:t.newCommentText,callback:function(e){t.newCommentText=e},expression:"newCommentText"}})],1)},rt=[],ot=s("1732"),it={data(){return{newCommentText:""}},computed:l()({},Object(p["c"])({user:"pwrup/authUser"})),methods:{isInputEmpty(){this.newCommentText.match(/^\s*$/)&&(this.newCommentText="")},saveCommentData(){const t={id:Object(ot["a"])(),text:this.newCommentText,publishedAt:Math.floor(Date.now()/1e3),userId:this.user.userId,reactions:{replies:{},likes:{},likesCount:0}};this.$emit("save-comment",{comment:t}),this.newCommentText=""}}},lt=it,ct=s("27f9"),pt=s("0016"),dt=Object(u["a"])(lt,nt,rt,!1,null,null,null),mt=dt.exports;k()(dt,"components",{QCardSection:y["a"],QInput:ct["a"],QIcon:pt["a"],QBtn:f["a"]});var ut={components:{AppDate:M,ImageTag:at,CommentList:W,CommentSave:mt},filters:{capitalize(t){return t.trim().toLowerCase().replace(/\w\S*/g,(t=>t.replace(/^\w/,(t=>t.toUpperCase()))))}},props:{post:{type:Object,required:!0}},methods:{userById(t){return this.$store.state.pwrup.users.find((e=>e.userId===t.userId))},isPostLikedByUser(t){const e=this.$store.getters["pwrup/authUser"].userId;return!!t.reactions.likes.hasOwnProperty(e)},toggleLikeImage(t){const e=this.$store.getters["pwrup/authUser"].userId;t.reactions.likes.hasOwnProperty(e)?this.$store.dispatch("pwrup/unLikePost",t):this.$store.dispatch("pwrup/likePost",t)},addComment(t){const e=l()(l()({},t.comment),{},{postId:this.post.id});this.$store.dispatch("pwrup/addComment",{comment:e})},deletePost(t){const e=this.$q.notify({group:!1,timeout:0,spinner:!0,message:"Deleting file...",caption:"0%"});L["e"].where("postId","==",t.id).get().then((t=>{let e=L["c"].batch();return t.forEach((t=>{e.delete(t.ref)})),e.commit()})).catch((t=>commit("setError",t))),L["b"].where("postId","==",t.id).get().then((t=>{let e=L["c"].batch();return t.forEach((t=>{e.delete(t.ref)})),e.commit()})).catch((t=>commit("setError",t))),L["g"].ref().child(t.imgName).delete().then(e({icon:"done",spinner:!1,caption:"100%",message:"Post deleted!",timeout:2500})).catch((t=>commit("setError",t))),L["f"].doc(t.id).delete()}}},ht=ut,ft=s("3b73"),gt=Object(u["a"])(ht,j,P,!1,null,null,null),bt=gt.exports;k()(gt,"components",{QCard:v["a"],QItem:h["a"],QItemSection:g["a"],QAvatar:b["a"],QItemLabel:w["a"],QCardActions:K["a"],QBtn:f["a"],QCardSection:y["a"],QExpansionItem:ft["a"]});var wt={components:{ImageCard:bt},computed:l()({},Object(p["d"])(["posts"]))},qt=wt,xt=s("1c1c"),vt=Object(u["a"])(qt,S,$,!1,null,null,null),yt=vt.exports;k()(vt,"components",{QList:xt["a"],QItem:h["a"]});var Ct={name:"PageHome",components:{TheRightPanel:O,PostList:yt},data(){return{}}},_t=Ct,It=(s("d78d"),s("9989")),kt=Object(u["a"])(_t,a,n,!1,null,"bcd149fc",null);e["default"]=kt.exports;k()(kt,"components",{QPage:It["a"],QIcon:pt["a"]})},d78d:function(t,e,s){"use strict";s("5268")}}]);